<!--
  Create a new visualization - DBL Visualization
  Authors: Heleen van Dongen, Veerle Uhl, Quinn van Rooy, Geert Wood, Hieke van Heesch, Martijn van Kekem.
-->

<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <title>New visualization - DBL</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/adjacencymatrix.css">
  <link rel="stylesheet" href="css/spinner.css">
  <link rel="stylesheet" href="css/tabulator_simple.min.css">
  <link rel="stylesheet" href="css/vanillaSelectBox.css">
</head>

<body>

  <!-- Upload Header -->
  <header>
    <div class="wrapper">
      <h1>Create<span class="color">.</span></h1>
      <nav>
        <ul>
          <li><a href="index.html"><button>Home</button></a></li>
          <li><a href="create.html"><button>Visualizations</button></a></li>
          <li><a href="backgroundinfo.html"><button>Background Info</button></a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Loading spinner -->
  <div class="spinner" id="spinner">
    <div class="container" txt="Loading...">
      <div class="lds-dual-ring"></div>
    </div>
  </div>

  <!-- Error screen -->
  <div class="errorOverlay" id="errorOverlay">
    <div class="container">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <path
          d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z" />
      </svg>
      <div class="title">Something went wrong!</div>
      <div class="text">This feature might not be implemented yet, or might not be working for a 100%.<br>Please try
        again later.</div>
    </div>
  </div>

  <div class="wrapper" id="dataFormatter">
    <p>To merge multiple sets of nodes, make sure the attribute names match.<br><br>
      For example: you have a node set (fromID, fromEmail) and a node set (toID, toEmail). Make sure to set the same
      attribute name (eg. id) for fromID and toID to merge these columns.
      Do this for fromEmail, toEmail as well.<br><br>
      <b>Important:</b> The primary attribute should be the first item in the table. The primary link attribute should
      be numeric.
    </p>
    <div id="dataTable"></div>
    <button onclick="visualize();">Visualize data</button>
  </div>

  <!-- Control window -->
  <div class="controlWindow" id="controlWindow">
    <div class="zoom controlContainer">
      <h3>Zoom</h3>
      <div class="buttonContainer">
        <button id="button_zoomIn">+</button>
        <button id="button_zoomOut">-</button>
      </div>
    </div>

    <div class="filters controlContainer">
      <h3>Filters</h3>
      <div id="filterContainer"></div>
    </div>

    <p class="helpText">The horizontal scroll bar is at the bottom of the visualization. You can also use SHIFT +
      Scroll.</p>
    
  </div>

  <!-- Visualizations -->
  <div class="visualization" id="visContainer">
    <svg class="vissvg" id="vis_adjacancy"></svg>
    <svg class="vissvg" id="vis_hierarchical"></svg>
    <div id="hoverContainer" class="hoverContainer">
      <div class="content">
        <h3>Information<span class="color">.</span></h3>

        <p>Source:</p>
        <ul id="sourceList"></ul>
        <p>Target:</p>
        <ul id="targetList"></ul>

        <p id="hover_notraffic">There is no e-mail traffic between these nodes.</p>
        <div id="hover_hastraffic">
          <p>Average: <span id="linkAttrLabel"></span></p>
          <p>Total links between nodes: <span id="totalLabel"></span></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Upload container -->
  <div class="popupContainer" id="uploadContainer" style="display: block;">
    <div class="container">
      <div class="fileUpload" id="fileUpload">
        <h1>Upload a file to begin.</h1>
        <p>The uploaded file must be a .csv file, delimited by a comma. The first row should contain the column names.
        </p>

        <!-- Upload form -->
        <form id="uploadForm" action="php/getColumnsFromCSV.php" method="POST">
          <input type="file" accept=".csv" id="csvFile" name="csvFile" required><br />
          <button class="rightMargin" onclick="cancelClick(1);">Cancel</button>
          <input type="submit" id="submit" name="submit" value="Upload" />
        </form>
      </div>
      <div class="selectVis" id="visSelect">
        <h1>Choose a visualization type.</h1>
        <p>Select the type of visualization you would like to generate.</p>
        <button class="rightMargin" onclick="selectVis(0);">Adjacency matrix</button>
        <button onclick="selectVis(1);">Hierarchical Edge</button><br>
        <button onclick="selectVis(2);">Both</button><br>
        <a href="#" onclick="cancelClick(0);">Back to previous page</a>
      </div>
    </div>
  </div>

  <!-- Javascript -->
  <!-- Libraries -->
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/tabulator.min.js"></script>
  <!-- Custom code -->
  <script src="js/create.js"></script>
  <script src="js/AdjacencyMatrix.js"></script>
  <script src="js/HierarchicalEdge.js"></script>
  <script src="js/Filter.js"></script>
  <script src="js/vanillaSelectBox.js"></script>


</body>

</html>